<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Span Similarity - Vectorian</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Span Similarity";
    var mkdocs_page_input_path = "sim_span.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Vectorian</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../introduction/">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../documents/">Documents</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../embeddings/">Embeddings</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../session/">Session</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../sim_token/">Token Similarity</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Span Similarity</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#spansimilarity">SpanSimilarity</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#spanflowstrategy">SpanFlowStrategy</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../vec_index/">Index</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Vectorian</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Span Similarity</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="span-similarity">Span Similarity</h1>
<h2 id="spansimilarity">SpanSimilarity</h2>
<p>Classes that derive from <code>SpanSimilarity</code> model strategies to compare spans
of tokens, e.g. sentences. In contrast to comparing pairs of single tokens -
a concept that is called <code>TokenSimilarity</code> in the Vectorian API -
<code>SpanSimilarity</code> describes how to compute a similarity score between
two spans (i.e. sequences) of tokens, e.g. between to sentences.</p>
<p>There are two kind of <code>SpanSimilarity</code> strategies the Vectorian supports, and
they are handled in two separate classes:</p>
<ul>
<li><code>SpanFlowSimilarity</code> models span flows (e.g. alignments and WMD)</li>
<li><code>SpanEmbeddingSimilarity</code> models span embeddings</li>
</ul>
<p><img alt="Implementations of SpanSimilarity" src="../images/sim_span.png" /></p>
<p>The term "span flows" encompasses anything that produces a flow or mapping
between pairs of spans on a token level. On the one hand this can mean classical
alignments - e.g. Needleman-Wunsch or Smith-Waterman. On the other hand,
"flows" also include network-based approaches such as Word Mover's Distance.
The exact kind of strategy is specified using a
<a href="#spanflowstrategy"><code>SpanFlowStrategy</code></a> in the <code>SpanFlowSimilarity</code> constructor.</p>
<p>The term "span embeddings" is a generalization of what is usually called
"document embeddings" or "sentence embeddings". With this strategy we
compute one embedding for a span of tokens. We do not specify an explicit
strategy for dealing with individual tokens. Instead we provide an encoder
that takes a span of tokens and outputs an embedding. To allow various kinds
of approaches (such as building span embeddings from token embeddings) the
actual encoder is wrapped inside other classes such as <code>SpanEncoder</code> and
<code>PartitionEncoder</code> (more on this later).</p>
<p>Here is an example of setting up a Waterman-Smith-Beyer alignment that uses
cosine similarity over a pretrained GloVe embedding of dimension 50:</p>
<pre><code>vectorian.metrics.SpanFlowSimilarity(
    token_sim=vectorian.metrics(
        vectorian.embeddings.PretrainedGloVe('6B', ndims=50),
        vectorian.sim.vector.CosineSimilarity()
    ),
    flow_strategy=vectorian.alignment.WatermanSmithBeyer(
        gap=vectorian.alignment.ExponentialGapCost(cutoff=5),
        zero=0.25))
</code></pre>
<h2 id="spanflowstrategy">SpanFlowStrategy</h2>
<p><code>SpanFlowStrategy</code> models a strategy to compute a network flow on the bipartite
graph that models a pair of token spans (with tokens as nodes and each part of
the graph modelling one span). Specific strategies to do this include classical
alignments (e.g. Needleman-Wunsch) and variants of the Word Mover's Distance.</p>
<p>The following diagram shows the current implementations for <code>SpanFlowStrategy</code>
available in the Vectorian.</p>
<p><img alt="Classes implementing SpanFlowStrategy" src="../images/alignment_uml.png" /></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../vec_index/" class="btn btn-neutral float-right" title="Index">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../sim_token/" class="btn btn-neutral" title="Token Similarity"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../sim_token/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../vec_index/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
